<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Puppet Templates and Parameterized Classes and Defined Types</title>
		<meta name="description" content="Programming Articles Since 2006">
		<link rel="alternate" href="/lennunet/feed/feed.xml" type="application/atom+xml" title="Lennu.net">
		<link rel="alternate" href="/lennunet/feed/feed.json" type="application/json" title="Lennu.net">
		
		<style>/* Only include the syntax highlighter CSS on blog posts */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
* { box-sizing: border-box; }
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}
header:after {
	content: "";
	display: table;
	clear: both;
}

.links-nextprev {
	list-style: none;
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em .5em;
	flex-wrap: wrap;
	align-items: center;
	padding: 1em;
}
.home-link {
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
	margin-right: 2em;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
	margin-right: 1em;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

/* Direct Links / Markdown Headers */
.header-anchor {
	text-decoration: none;
	font-style: normal;
	font-size: 1em;
	margin-left: .1em;
}
a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
	text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
	color: #aaa;
}

h2 + .header-anchor {
	font-size: 1.5em;
}</style>
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/lennunet/" class="home-link">Lennu.net</a>
			<nav>
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/lennunet/">Home</a></li>
					<li class="nav-item"><a href="/lennunet/archive/">Archive</a></li>
					<li class="nav-item"><a href="/lennunet/about/">About Me</a></li>
				</ul>
			</nav>
		</header>

		<main id="skip">
			
<h1>Puppet Templates and Parameterized Classes and Defined Types</h1>

<ul class="post-metadata">
	<li><time datetime="2015-01-15">15 January 2015</time></li>
</ul>

<p><picture><source type="image/avif" srcset="/lennunet/img/2Ubq826ViN-300.avif 300w"><source type="image/webp" srcset="/lennunet/img/2Ubq826ViN-300.webp 300w"><img alt="Puppet Logo" loading="lazy" decoding="async" src="/lennunet/img/2Ubq826ViN-300.png" width="300" height="269"></picture></p>
<p>This post continues our Puppet example series. On this post I will show you example for Templates, Parameterized Classes and Defined Types. All examples were made on Ubuntu 12.04 and you can find all the rest of the example articles from the archive section of this website.</p>
<h3 id="templates" tabindex="-1">Templates <a class="header-anchor" href="#templates">#</a></h3>
<p>Template are way to make different choices on different Puppet clients. For example not all of your clients operating systems are always the same so there might be some differences on them. And especially on the hardware site where most of the computers usually differ somehow from each other.</p>
<p>Here is a simple example for getting the operating system out from your client. Iâ€™ll make a module templatetesti and define there a class which will make file which contains our template. The template itself contains some ruby code and is the next code section after the class.</p>
<pre><code>class templatetesti {
        file {'/tmp/templatetesti':
                ensure=&gt;file,
                content=&gt;template('templatetesti/templatetesti.erb'),
        }
}
</code></pre>
<pre><code>&lt;%= @operatingsystem %&gt;
</code></pre>
<h3 id="parameterized-classes" tabindex="-1">Parameterized Classes <a class="header-anchor" href="#parameterized-classes">#</a></h3>
<p>These classes are like any other programming language classes. You can give them parameters to get some specific result. Remember that you canâ€™t use include with these classes. The right way is just to <code>puppet apply testclass.pp</code>. First create a module and then the parameter class.</p>
<pre><code>class testpara ($value1) {
        notify {&quot;${value1}&quot;:}
        package {&quot;${value1}&quot;:
                provider=&gt;apt,
                ensure=&gt;installed,
        }
}
</code></pre>
<pre><code>class {'testpara':
        value1=&gt;'apache2',
}
</code></pre>
<h3 id="defined-types" tabindex="-1">Defined Types <a class="header-anchor" href="#defined-types">#</a></h3>
<p>With defined types you can give definitions to certain resources. This is a straight copy from Puppets documentation.</p>
<pre><code>define planfile ($user = $title, $content) {
	file {&quot;/home/${user}/.plan&quot;:
		ensure  =&gt; file,
		content =&gt; $content,
		mode    =&gt; 0644,
		owner   =&gt; $user,
		require =&gt; User[$user],
		}
	}
 
user {'nick':
	ensure     =&gt; present,
	managehome =&gt; true,
	uid        =&gt; 517,
}
planfile {'nick':
	content =&gt; &quot;Working on new Learning Puppet chapters. Tomorrow: upgrading the LP virtual machine.&quot;,
}
</code></pre>
<h3 id="change-wlan-password" tabindex="-1">Change WLAN Password <a class="header-anchor" href="#change-wlan-password">#</a></h3>
<p>As bonus today I made nice module to change the password of your wlan if you choose to change it. You need to have your wlan config file in your module files section.</p>
<pre><code>class changewlanpassword {
        file { &quot;/etc/NetworkManager/system-connections/lennu.net&quot;:
                source =&gt; 'puppet:///modules/changewlanpassword/lennu.net',
                owner =&gt; root,
        }
 
        service { 'network-manager':
                ensure =&gt; running,
                subscribe =&gt; File['/etc/NetworkManager/system-connections/lennu.net'],
        }
}
</code></pre>

<ul class="links-nextprev"><li>Previous: <a href="/lennunet/2015/puppet-resource-ordering-examples/">Puppet Resource Ordering Examples</a></li><li>Next: <a href="/lennunet/2015/richard-stallman-visited-our-school/">Richard Stallman Visited Our School</a></li>
</ul>

		</main>

		<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7304499576176216" crossorigin="anonymous"></script>
		<!-- Lennu.net -->
		<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7304499576176216" data-ad-slot="8208814281" data-ad-format="auto" data-full-width-responsive="true"></ins>
		<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
		</script>

		<footer></footer>

		<!-- Current page: /lennunet/2015/puppet-templates-and-paremeterized-classes-and-defined-types/ -->
	</body>
</html>
